// FIXME: Does not work on FlexPRET yet.
target C {
    threading: false,
    build: "../scripts/build_flexpret_unix.sh",
    // timeout: 500 msec
};

preamble {=
    #include <stdint.h>
    #include <flexpret_io.h>
=}

main reactor {
    timer t(0, 100 ms);
    state count:{=uint32_t=}
    reaction(t) {=
        self->count += 1;
        _fp_print(self->count);
        if (self->count >= 10) lf_request_stop();
    =}
}
